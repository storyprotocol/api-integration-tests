# Test info

- Name: List LicenseIpTerms @Licenses >> query with default
- Location: /home/runner/work/api-integration-tests/api-integration-tests/tests/api/licenses/licenses-ip-terms.post.spec.ts:6:7

# Error details

```
Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 530
    at /home/runner/work/api-integration-tests/api-integration-tests/tests/api/licenses/licenses-ip-terms.post.spec.ts:8:31
```

# Test source

```ts
   1 | import { test, expect } from "../fixtures/base";
   2 |
   3 | const endpoint = "./licenses/ip/terms";
   4 |
   5 | test.describe("List LicenseIpTerms @Licenses", () => {
   6 |   test("query with default", async ({ request }) => {
   7 |     const response = await request.post(endpoint);
>  8 |     expect(response.status()).toBe(200);
     |                               ^ Error: expect(received).toBe(expected) // Object.is equality
   9 |
  10 |     const { errors, data } = await response.json();
  11 |     expect(errors).toBeUndefined();
  12 |     expect(Array.isArray(data)).toBeTruthy();
  13 |     expect(data.length).toBeGreaterThan(0);
  14 |     expect(typeof data[0].id).toBe("string");
  15 |     expect(typeof data[0].ipId).toBe("string");
  16 |     expect(typeof data[0].licenseTemplate).toBe("string");
  17 |     expect(typeof data[0].licenseTermsId).toBe("string");
  18 |     expect(typeof data[0].blockNumber).toBe("string");
  19 |     expect(typeof data[0].blockTime).toBe("string");
  20 |     expect(data[0].id).toBeTruthy();
  21 |     expect(data[0].ipId).toBeTruthy();
  22 |     expect(data[0].licenseTemplate).toBeTruthy();
  23 |     expect(data[0].licenseTermsId).toBeTruthy();
  24 |     expect(data[0].blockNumber).toBeTruthy();
  25 |     expect(data[0].blockTime).toBeTruthy();
  26 |     for (let i = 0; i < data.length - 1; i++) {
  27 |       const item = parseInt(data[i].blockTime);
  28 |       const nextItem = parseInt(data[i + 1].blockTime);
  29 |       expect(item).toBeGreaterThanOrEqual(nextItem);
  30 |     }
  31 |   });
  32 |
  33 |   const pageParams = [
  34 |     { pagination: { offset: 0, limit: 5 } },
  35 |     { pagination: { offset: 1, limit: 4 } },
  36 |   ];
  37 |   for (const { pagination } of pageParams) {
  38 |     test(`query with pagination ${JSON.stringify(pagination)}`, async ({
  39 |       request,
  40 |     }) => {
  41 |       const payload = {
  42 |         options: { pagination: pagination },
  43 |       };
  44 |       const response = await request.post(endpoint, {
  45 |         data: payload,
  46 |       });
  47 |       expect(response.status()).toBe(200);
  48 |
  49 |       const offsetResponse = await request.post(endpoint, {
  50 |         data: { options: { pagination: { limit: 5 } } },
  51 |       });
  52 |       const offsetJson = await offsetResponse.json();
  53 |       const firstItem = offsetJson.data[pagination.offset];
  54 |
  55 |       const { errors, data } = await response.json();
  56 |       expect(errors).toBeUndefined();
  57 |       expect(data.length).toBeLessThanOrEqual(pagination.limit);
  58 |       expect(data[0]).toMatchObject(firstItem);
  59 |     });
  60 |   }
  61 |
  62 |   test("query with filter", async ({ request, licensesIpTerms }) => {
  63 |     const whereParams = [
  64 |       { where: { ipId: licensesIpTerms[1].ipId }, exists: true },
  65 |       {
  66 |         where: { ipId: "0xe7517E0Ee3e255a904BD777961C20566be089999" },
  67 |         exists: false,
  68 |       },
  69 |     ];
  70 |     for (const { where, exists } of whereParams) {
  71 |       await test.step(`query with where ${JSON.stringify(where)}`, async () => {
  72 |         const payload = {
  73 |           options: { where },
  74 |         };
  75 |         const response = await request.post(endpoint, {
  76 |           data: payload,
  77 |         });
  78 |         expect(response.status()).toBe(200);
  79 |
  80 |         const { errors, data } = await response.json();
  81 |         expect(errors).toBeUndefined();
  82 |         if (exists) {
  83 |           expect(data.length).toBeGreaterThan(0);
  84 |           data.forEach((item: object) => {
  85 |             expect(item).toMatchObject(where);
  86 |           });
  87 |         } else {
  88 |           expect(data.length).toBe(0);
  89 |         }
  90 |       });
  91 |     }
  92 |   });
  93 | });
  94 |
```