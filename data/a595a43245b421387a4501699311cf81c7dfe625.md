# Test info

- Name: List LicenseTokens @Licenses >> query with pagination {"offset":0,"limit":5}
- Location: /home/runner/work/api-integration-tests/api-integration-tests/tests/api/licenses/licenses-tokens.post.spec.ts:48:9

# Error details

```
Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 530
    at /home/runner/work/api-integration-tests/api-integration-tests/tests/api/licenses/licenses-tokens.post.spec.ts:57:33
```

# Test source

```ts
   1 | import { test, expect } from "../fixtures/base";
   2 |
   3 | const endpoint = "./licenses/tokens";
   4 |
   5 | test.describe("List LicenseTokens @Licenses", () => {
   6 |   test("query with default", async ({ request }) => {
   7 |     const response = await request.post(endpoint);
   8 |     expect(response.status()).toBe(200);
   9 |
   10 |     const { errors, data } = await response.json();
   11 |     expect(errors).toBeUndefined();
   12 |     expect(Array.isArray(data)).toBeTruthy();
   13 |     expect(data.length).toBeGreaterThan(0);
   14 |     expect(typeof data[0].id).toBe("string");
   15 |     expect(typeof data[0].licensorIpId).toBe("string");
   16 |     expect(typeof data[0].licenseTemplate).toBe("string");
   17 |     expect(typeof data[0].licenseTermsId).toBe("string");
   18 |     expect(typeof data[0].transferable).toBe("string");
   19 |     expect(typeof data[0].owner).toBe("string");
   20 |     expect(typeof data[0].mintedAt).toBe("string");
   21 |     expect(typeof data[0].expiresAt).toBe("string");
   22 |     expect(typeof data[0].burntAt).toBe("string");
   23 |     expect(typeof data[0].blockNumber).toBe("string");
   24 |     expect(typeof data[0].blockTime).toBe("string");
   25 |     expect(data[0].id).toBeTruthy();
   26 |     expect(data[0].licensorIpId).toBeTruthy();
   27 |     expect(data[0].licenseTemplate).toBeTruthy();
   28 |     expect(data[0].licenseTermsId).toBeTruthy();
   29 |     expect(data[0].transferable).toBeTruthy();
   30 |     expect(data[0].owner).toBeTruthy();
   31 |     expect(data[0].mintedAt).toBeTruthy();
   32 |     expect(data[0].expiresAt).toBeTruthy();
   33 |     expect(data[0].burntAt).toBeTruthy();
   34 |     expect(data[0].blockNumber).toBeTruthy();
   35 |     expect(data[0].blockTime).toBeTruthy();
   36 |     for (let i = 0; i < data.length - 1; i++) {
   37 |       const item = parseInt(data[i].blockTime);
   38 |       const nextItem = parseInt(data[i + 1].blockTime);
   39 |       expect(item).toBeGreaterThanOrEqual(nextItem);
   40 |     }
   41 |   });
   42 |
   43 |   const pageParams = [
   44 |     { pagination: { offset: 0, limit: 5 } },
   45 |     { pagination: { offset: 1, limit: 4 } },
   46 |   ];
   47 |   for (const { pagination } of pageParams) {
   48 |     test(`query with pagination ${JSON.stringify(pagination)}`, async ({
   49 |       request,
   50 |     }) => {
   51 |       const payload = {
   52 |         options: { pagination: pagination },
   53 |       };
   54 |       const response = await request.post(endpoint, {
   55 |         data: payload,
   56 |       });
>  57 |       expect(response.status()).toBe(200);
      |                                 ^ Error: expect(received).toBe(expected) // Object.is equality
   58 |
   59 |       const offsetResponse = await request.post(endpoint, {
   60 |         data: { options: { pagination: { limit: 5 } } },
   61 |       });
   62 |       const offsetJson = await offsetResponse.json();
   63 |       const firstItem = offsetJson.data[pagination.offset];
   64 |
   65 |       const { errors, data } = await response.json();
   66 |       expect(errors).toBeUndefined();
   67 |       expect(data.length).toBeLessThanOrEqual(pagination.limit);
   68 |       expect(data[0]).toMatchObject(firstItem);
   69 |     });
   70 |   }
   71 |
   72 |   test("query with filter", async ({ request, licensesTokens }) => {
   73 |     const whereParams = [
   74 |       { where: { licensorIpId: licensesTokens[1].licensorIpId }, exists: true },
   75 |       {
   76 |         where: { licensorIpId: "0x5FCeDadBbDF710Ac3C528F6Aac9D1bD9ac189999" },
   77 |         exists: false,
   78 |       },
   79 |     ];
   80 |     for (const { where, exists } of whereParams) {
   81 |       await test.step(`query with where ${JSON.stringify(where)}`, async () => {
   82 |         const payload = {
   83 |           options: { where },
   84 |         };
   85 |         const response = await request.post(endpoint, {
   86 |           data: payload,
   87 |         });
   88 |         expect(response.status()).toBe(200);
   89 |
   90 |         const { errors, data } = await response.json();
   91 |         expect(errors).toBeUndefined();
   92 |         if (exists) {
   93 |           expect(data.length).toBeGreaterThan(0);
   94 |           expect(data[0].licensorIpId).toBe(licensesTokens[1].licensorIpId);
   95 |         } else {
   96 |           expect(data.length).toBe(0);
   97 |         }
   98 |       });
   99 |     }
  100 |   });
  101 | });
  102 |
```